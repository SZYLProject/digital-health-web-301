(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8db8c3ee"],{"03ba":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dynamic-table"},[a("div",{staticClass:"table-setting"},[a("el-dropdown",{ref:"tableDrop",attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-s-tools"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("div",{staticClass:"dropdown-checkbox",staticStyle:{width:"480px"}},[a("p",{staticClass:"title"},[t._v("设置表格显示列")]),a("el-scrollbar",{ref:"scroll",staticStyle:{height:"100%","padding-bottom":"20px"}},[a("div",{staticStyle:{height:"300px"}},[a("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.headerData,(function(e,n){return a("el-checkbox",{key:n,attrs:{label:e.key}},[t._v(t._s(e.val))])})),1)],1)]),a("div",{staticClass:"dropdown-button"},[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.okHandle(e)}}},[t._v("确认")]),a("el-button",{attrs:{type:"primary",plain:"",size:"small"},nativeOn:{click:function(e){return t.cancel(e)}}},[t._v("取消")])],1)],1)])],1)],1),a("el-table",{ref:"multipleTable",attrs:{data:t.tableData,stripe:"","header-cell-class-name":"tableTH"},on:{"selection-change":t.handleSelectionChange}},[t._l(t.defaultHeader,(function(e){return a("el-table-column",{key:e.key,attrs:{prop:e.key,label:e.val,sortable:"",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.row[e.key]))]}}],null,!0)})})),t.operate?a("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/view360/"+e.row["person_id"]+"/0/?parentName=患者概览"},target:"_blank"}},[a("el-button",{attrs:{type:"text"}},[t._v("详情")])],1)]}}],null,!1,1249194199)}):t._e()],2)],1)},c=[],l=(a("4de4"),a("c975"),a("d81d"),a("fb6a"),{props:{operate:{type:Boolean,default:!1},tableData:{type:Array,default:null},headerData:{type:Array,default:null}},watch:{headerData:function(t){var e=this;this.defaultHeader=t.slice(0,8),this.defaultHeader.map((function(t){e.checkList.push(t.key)}))}},data:function(){return{checkList:[],defaultHeader:[]}},methods:{handleSelectionChange:function(t){this.multipleSelection=t},okHandle:function(){var t=this;this.defaultHeader=this.headerData.filter((function(e){return t.checkList.indexOf(e.key)>-1})),this.$refs.tableDrop.hide()},cancel:function(){this.$refs.tableDrop.hide()}}}),i=l,s=(a("e435"),a("c3c5"),a("2877")),o=Object(s["a"])(i,n,c,!1,null,"31173b64",null);e["a"]=o.exports},"2b1d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-popover",{ref:"messageDrop",attrs:{placement:"bottom",trigger:"click"}},[a("el-button",{attrs:{slot:"reference",disabled:t.disabled,size:"medium"},slot:"reference"},[t._v(t._s(t.title)),a("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),a("div",{staticClass:"popover-checkbox"},[a("el-input",{attrs:{size:"small",placeholder:"请输入内容","prefix-icon":"el-icon-search"},on:{input:t.conditionFilter},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}}),a("el-checkbox-group",{staticClass:"block",staticStyle:{height:"150px"},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[a("el-scrollbar",{ref:"scroll",staticStyle:{height:"100%"}},t._l(t.checkChild,(function(e,n){return a("el-checkbox",{key:n,attrs:{label:e.id}},[t._v(" "+t._s(e.categoryName)+" ")])})),1)],1),a("div",{staticClass:"popover-button"},[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.confirmBtn(e)}}},[t._v("确认")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(e){return t.cancel(e)}}},[t._v("取消")])],1)],1)],1)},c=[],l=(a("4de4"),a("d81d"),a("d3b7"),a("ac1f"),a("25f0"),a("466d"),a("841c"),a("ddb0"),a("5530")),i=a("2f62"),s=a("b775");function o(){return Object(s["a"])({url:"/crp-collection/collectionCategory/v1/listAll",method:"GET",params:{categoryName:"",categoryType:1}})}function r(t){return Object(s["a"])({url:"/crp-collection/personCollection/v1/add",method:"POST",data:t})}var u=a("a318"),d={props:{title:{type:String,default:""},disabled:{type:Boolean,default:!1},keys:{type:String,default:""}},data:function(){return{input2:"",checkList:[],checkListDatas:[],checkChild:[]}},computed:Object(l["a"])({},Object(i["d"])(["userInfo","keyWordListsId"])),watch:{},created:function(){},mounted:function(){switch(this.keys){case"collection":this.getListAll();break;case"":break}},methods:Object(l["a"])(Object(l["a"])({},Object(i["e"])(["caseSearch/keywordlists"])),{},{cancel:function(){this.$refs.messageDrop.doClose(),this.checkList=[]},confirmBtn:function(){if(this.checkList.length>0)switch(this.keys){case"collection":this.postCollectCommit();break;case"":break}else this.$message({message:"请先勾选收藏分类~",type:"warning"})},getListAll:function(){var t=this;o().then((function(e){(null===e||void 0===e?void 0:e.obj)&&(t.checkListDatas=e.obj,t.checkChild=e.obj)})).catch((function(t){}))},postCollectCommit:function(){var t,e,a=this,n={personIds:this.keyWordListsId.toString()||"",categoryIds:this.checkList.toString()||"",userId:null!==(t=null===(e=this.userInfo)||void 0===e?void 0:e.pkId)&&void 0!==t?t:null};r(n).then((function(t){a.$refs.messageDrop.doClose(),a.checkList=[],a.$message({message:"收藏成功！",type:"success"})})).catch((function(t){}))},conditionFilter:function(){var t=this,e=this.checkListDatas,a=e.map((function(e){var a=-1!==e.categoryName.search(t.input2)||u.default.match(e.categoryName,t.input2);if(a)return e})).filter((function(t){return t}));this.checkChild=a}}),destroyed:function(){this["caseSearch/keywordlists"]([])}},h=d,p=a("2877"),f=Object(p["a"])(h,n,c,!1,null,"0c2551a8",null);e["a"]=f.exports},"6ce35":function(t,e,a){},"7f0f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collect-patient module-container"},[a("div",{staticClass:"title"},[a("el-link",{staticClass:"back",attrs:{underline:!1},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"el-icon-arrow-left"})]),a("h1",{staticClass:"inlineBlock"},[t._v(" 收藏管理 ")])],1),a("div",{staticClass:"operate"},[a("el-button",{attrs:{disabled:"",size:"medium"}},[t._v(" 取消收藏 ")]),a("div",{staticClass:"space inlineBlock"},[a("AddCollectObject",{attrs:{title:"添加至项目",disabled:""}})],1),a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"收藏分类",size:"medium"},on:{change:t.selectChange},model:{value:t.query.categoryIds,callback:function(e){t.$set(t.query,"categoryIds",e)},expression:"query.categoryIds"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t.categoryName,value:t.id}})})),1)],1),a("div",{staticClass:"table"},[a("DynamicTable",{attrs:{tableData:t.tableData,headerData:t.headerData,operate:""}}),a("el-pagination",{attrs:{"current-page":t.query.pageNo,"page-sizes":[10,20,30,40,50],"page-size":t.query.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:t.total,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},c=[],l=(a("d81d"),a("2b1d")),i=a("03ba"),s=a("d14f"),o=a("b3d4"),r={name:"PatientCollect",components:{AddCollectObject:l["a"],DynamicTable:i["a"]},data:function(){return{options:[],input2:"",tableData:[],headerData:[],total:0,query:{categoryIds:"",pageNo:1,pageSize:10},multipleSelection:[]}},created:function(){this.getAllCollects(),this.getCollectCategory()},methods:{getAllCollects:function(){var t=this;Object(s["b"])(this.query).then((function(e){var a=e.obj,n=a.data,c=a.total,l=a.fields,i=[];n.map((function(t){i.push(JSON.parse(t))})),t.tableData=i||[];var s=[];for(var o in l)s.push({key:o,val:l[o]});t.headerData=s||[],t.total=c})).catch((function(t){}))},handleSizeChange:function(t){this.query.pageSize=t,this.getAllCollects()},handleCurrentChange:function(t){this.query.pageNo=t,this.getAllCollects()},selectChange:function(t){this.query.categoryIds=t,this.query.pageNo=1,this.getAllCollects()},getCollectCategory:function(){var t=this,e={categoryType:1,categoryName:""};Object(o["i"])(e).then((function(e){var a=e.obj;t.options=a||[]})).catch((function(){}))}}},u=r,d=(a("dd7a"),a("2877")),h=Object(d["a"])(u,n,c,!1,null,"abb0d5c6",null);e["default"]=h.exports},8922:function(t,e,a){},c3c5:function(t,e,a){"use strict";var n=a("d1de"),c=a.n(n);c.a},d14f:function(t,e,a){"use strict";a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return l}));var n=a("b775");function c(){return Object(n["a"])({url:"/crp-collection/personCollection/v1/getMyPersonInfo",method:"GET"})}function l(t){return Object(n["a"])({url:"/crp-collection/personCollection/v1/listAllPage",method:"GET",params:t})}},d1de:function(t,e,a){},dd7a:function(t,e,a){"use strict";var n=a("8922"),c=a.n(n);c.a},e435:function(t,e,a){"use strict";var n=a("6ce35"),c=a.n(n);c.a}}]);
//# sourceMappingURL=chunk-8db8c3ee.08f42db4.js.map