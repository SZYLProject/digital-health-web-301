(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a89d4fa6"],{"1d78":function(e,t,a){"use strict";var o=a("d510"),l=a.n(o);l.a},"9fa3f":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"configuration-management module-container-two"},[e._m(0),a("div",{staticClass:"page-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"请输入名称",size:"small",clearable:""},model:{value:e.formInline.categoryName,callback:function(t){e.$set(e.formInline,"categoryName","string"===typeof t?t.trim():t)},expression:"formInline.categoryName"}})],1),a("el-form-item",{attrs:{label:"应用范围"}},[a("el-select",{attrs:{placeholder:"请选择应用范围",size:"small",clearable:""},model:{value:e.formInline.categoryType,callback:function(t){e.$set(e.formInline,"categoryType",t)},expression:"formInline.categoryType"}},[a("el-option",{attrs:{label:"患者收藏",value:"1"}}),a("el-option",{attrs:{label:"搜索收藏",value:"2"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onCheckFn}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.newBuildEditFn("building")}}},[e._v("新建")])],1)],1)],1),a("div",{staticClass:"con"},[a("el-table",{attrs:{data:e.tableData,"header-cell-class-name":"tableTH",stripe:"","max-height":"630"}},[a("el-table-column",{attrs:{prop:"categoryName",align:"left",label:"收藏分类名称",width:"150"}}),a("el-table-column",{attrs:{prop:"categoryType",align:"left",label:"应用范围",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1===t.row.categoryType?"患者搜藏":"搜索收藏")+" ")]}}])}),a("el-table-column",{attrs:{prop:"categoryDesc",align:"left",label:"描述"}}),a("el-table-column",{attrs:{prop:"collectionDataNum",align:"left",label:"收藏数据",width:"120"}}),a("el-table-column",{attrs:{prop:"updateTime",align:"left",label:"更新时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timeFormat")(t.row.updateTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"left",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.newBuildEditFn(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"#F15643"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.deleteFn(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.popTitle,visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"info-form"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称：",prop:"categoryName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.categoryName,callback:function(t){e.$set(e.ruleForm,"categoryName","string"===typeof t?t.trim():t)},expression:"ruleForm.categoryName"}})],1),a("el-form-item",{attrs:{label:"描述：",prop:"categoryDesc"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.categoryDesc,callback:function(t){e.$set(e.ruleForm,"categoryDesc","string"===typeof t?t.trim():t)},expression:"ruleForm.categoryDesc"}})],1),a("el-form-item",{attrs:{label:"应用范围：",prop:"categoryType"}},[a("el-radio-group",{attrs:{disabled:1!==e.popIndex},model:{value:e.ruleForm.categoryType,callback:function(t){e.$set(e.ruleForm,"categoryType",t)},expression:"ruleForm.categoryType"}},[a("el-radio",{attrs:{label:1}},[e._v("患者收藏")]),a("el-radio",{attrs:{label:2}},[e._v("搜索收藏")])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.submitSure("ruleForm")}}},[e._v("确 定")])],1)])],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("h1",[e._v("收藏管理")])])}],i=(a("a9e3"),a("5530")),r=a("2f62"),n=a("b775");function s(e){return Object(n["a"])({url:"/crp-collection/collectionCategory/v1/listAllPage",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/crp-collection/collectionCategory/v1/updateBean",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/crp-collection/collectionCategory/v1/saveBean",method:"put",data:e})}function m(e){var t=e.id;return Object(n["a"])({url:"/crp-collection/collectionCategory/v1/deleteById/".concat(t),method:"delete",params:{}})}var p={name:"CollectionManage",data:function(){return{formInline:{categoryName:"",categoryType:""},tableData:[],pageNo:1,pageSize:10,total:0,dialogVisible:!1,ruleForm:{categoryName:"",categoryDesc:"",categoryType:1},rules:{categoryName:[{required:!0,message:"请输入分类名称",trigger:"blur"}],categoryDesc:[{max:500,message:"描述字符不能大于500",trigger:"blur"}],categoryType:[{required:!0,message:"请选择应用范围",trigger:"change"}]},popTitle:"",popIndex:1}},watch:{dialogVisible:function(e){e||this.$refs.ruleForm.resetFields()}},computed:Object(i["a"])({},Object(r["d"])(["userInfo"])),components:{},created:function(){this.getFormDatas()},mounted:function(){},destroyed:function(){},methods:{getFormDatas:function(){var e=this,t={pageNo:this.pageNo,pageSize:this.pageSize,categoryName:this.formInline.categoryName,categoryType:this.formInline.categoryType};s(t).then((function(t){var a,o=t.obj;o&&(e.tableData=null!==(a=null===o||void 0===o?void 0:o.data)&&void 0!==a?a:[],e.total=o.total)})).catch((function(){}))},onCheckFn:function(){this.pageNo=1,this.getFormDatas()},newBuildEditFn:function(e){this.ruleForm={categoryName:"",categoryDesc:"",categoryType:1};var t={newBuildTitle:"新建收藏分类",editTitle:"编辑收藏分类"};"building"===e?(this.popTitle=t.newBuildTitle,this.popIndex=1):(this.popTitle=t.editTitle,this.popIndex=2,this.ruleForm={categoryName:e.categoryName,categoryDesc:e.categoryDesc,categoryType:e.categoryType,id:e.id}),this.dialogVisible=!0},submitSure:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;1===t.popIndex?t.postNewBuildLists():t.postEditLists()}))},postNewBuildLists:function(){var e,t=this,a=this.ruleForm;a.userId=null===(e=this.userInfo)||void 0===e?void 0:e.pkId,u(a).then((function(e){0===e.success&&(t.dialogVisible=!1,t.$message({message:e.msg,type:"success"}),t.pageNo=1,t.getFormDatas())})).catch((function(){}))},postEditLists:function(){var e=this,t=this.ruleForm;c(t).then((function(t){0===t.success&&(e.dialogVisible=!1,e.$message({message:t.msg,type:"success"}),e.getFormDatas())})).catch((function(){}))},deleteFn:function(e){var t=this,a=e.collectionDataNum;0===Number(a)?this.$confirm("确认删除吗？, 此操作无法撤销。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.postDeleteLists(e.id)})).catch((function(){t.$message({type:"info",message:"已取消删除"})})):this.$message({message:"该分类下有收藏数据，请先取消收藏再删除~",type:"warning"})},postDeleteLists:function(e){var t=this,a={id:e};m(a).then((function(e){0===e.success&&(t.dialogVisible=!1,t.$message({message:e.msg,type:"success"}),t.getFormDatas())})).catch((function(){}))},handleSizeChange:function(e){this.pageSize=e,this.getFormDatas()},handleCurrentChange:function(e){this.pageNo=e,this.getFormDatas()}}},g=p,d=(a("b877"),a("1d78"),a("2877")),f=Object(d["a"])(g,o,l,!1,null,"073138fb",null);t["default"]=f.exports},b877:function(e,t,a){"use strict";var o=a("bfc1"),l=a.n(o);l.a},bfc1:function(e,t,a){},d510:function(e,t,a){}}]);